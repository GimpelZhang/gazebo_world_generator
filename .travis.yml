language: generic
sudo: required
dist: bionic

matrix:
  include:    
    - env: PYTHON_VERSION=3.6
    - env: PYTHON_VERSION=3.8

before_install:
- sudo apt-get -qq update
- sudo apt-get install python3-pip libspatialindex-dev pybind11-dev -y -qq
- sudo pip3 install pip --upgrade
- sudo pip3 install setuptools flake8 autopep8

install:
- pip3 install -e .

script: 
- autopep8 --recursive --aggressive --diff --exit-code pcg_gazebo
- flake8 pcg_gazebo
- pip3 install pytest
- python3 -c "import pcg_gazebo"
- pip3 install -e .[test]
- pytest -x tests